function MainRouter(e,t){e.state("home",{url:"/",templateUrl:"views/home.html"}).state("login",{url:"/login",templateUrl:"views/login.html"}).state("register",{url:"/register",templateUrl:"views/register.html"}).state("profile",{url:"/profile",templateUrl:"views/profile.html"}).state("event",{url:"/event",templateUrl:"views/event.html"}).state("history",{url:"/history",templateUrl:"views/history.html"}),t.otherwise("/")}function User(e,t){return e(t+"/users/:id",null,{login:{method:"POST",url:t+"/login"},register:{method:"POST",url:t+"/register"},query:{method:"GET",isArray:!1,transformResponse:function(e){return angular.fromJson(e)}}})}function UserController(e,t,o){function n(e){var t=e.token?e.token:null;t&&r.getUsers(),r.message=e.message}var r=this;r.location=o.path(),r.allUsers=[],r.user={},r.login=function(){e.login(r.user,n)},r.register=function(){e.register(r.user,n)},r.logout=function(){t.removeToken(),r.allUsers=[],r.user={}},r.getUsers=function(){r.allUsers=e.query(),r.user=t.getUser()},r.isLoggedIn=function(){return!!t.getToken()},r.isLoggedIn()&&(r.getUsers(),r.user=t.getUser())}function AuthInterceptor(e,t){return{request:function(o){var n=t.getToken();return o.url.match(e)&&n&&(o.headers.Authorization="Bearer "+n),o},response:function(o){return o.config.url.match(e)&&o.data.token&&t.saveToken(o.data.token),o}}}function TokenService(e,t){var o=this;o.saveToken=function(t){e.localStorage.setItem("token",t)},o.getToken=function(){return e.localStorage.getItem("token")},o.removeToken=function(){e.localStorage.removeItem("token")},o.getUser=function(){var e=o.getToken();return t.decodeToken(e)}}function get_location(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){pos={lat:e.coords.latitude,lng:e.coords.longitude},startMap()}):console.log("error: doesn't support geolocation")}function startMap(){map=new google.maps.Map(document.getElementById("map"),{center:pos,zoom:17});var e=document.createElement("div");new CenterControl(e,map);e.index=1,map.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(e);var t="img/current_location_icon.png";new google.maps.Marker({position:pos,map:map,icon:t});infowindow=new google.maps.InfoWindow;var o=new google.maps.places.PlacesService(map);o.nearbySearch({location:pos,types:["bar"],rankBy:google.maps.places.RankBy.DISTANCE},callback);var n=new google.maps.places.PlacesService(map);n.nearbySearch({location:pos,types:["restaurant"],rankBy:google.maps.places.RankBy.DISTANCE},callback)}function callback(e,t){if(t===google.maps.places.PlacesServiceStatus.OK)for(var o=0;o<e.length;o++)createMarker(e[o]),console.log(e[o])}function CenterControl(e,t){var o=document.createElement("a");o.style.display="inline-block",o.style.backgroundColor="#37c1f0",o.style.border="2px solid #4c4c4d",o.style.borderRadius="15px",o.style.boxShadow="0 2px 6px rgba(0,0,0,.3)",o.style.cursor="pointer",o.style.marginBottom="50px",o.style.textAlign="center",o.style.textDecoration="none",o.href="/event",e.appendChild(o);var n=document.createElement("span");n.style.color="#ffffff",n.style.fontFamily="Helvetica,Arial,sans-serif",n.style.fontSize="16px",n.style.lineHeight="40px",n.style.paddingLeft="20px",n.style.paddingRight="20px",n.innerHTML="Check In",o.appendChild(n),o.addEventListener("click",function(){})}function createMarker(e){var t="img/event_location.png",o=(e.geometry.location,new google.maps.Marker({map:map,position:e.geometry.location,icon:t}));google.maps.event.addListener(o,"click",function(){infowindow.setContent('<div class="infowindow">'+e.name+'<br /><a href="event.html">Go to Event page</a> </div>'),infowindow.open(map,this)})}angular.module("GetARoundApp",["angular-jwt","ngResource","ui.router"]).constant("API","http://localhost:3000/api").config(function(e){e.interceptors.push("AuthInterceptor")}).config(MainRouter),angular.module("GetARoundApp").factory("User",User),User.$inject=["$resource","API"],angular.module("GetARoundApp").controller("usersController",UserController),UserController.$inject=["User","TokenService","$location"],angular.module("GetARoundApp").factory("AuthInterceptor",AuthInterceptor),AuthInterceptor.$inject=["API","TokenService"],angular.module("GetARoundApp").service("TokenService",TokenService),TokenService.$inject=["$window","jwtHelper"],function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t="drawer",o="undefined"!=typeof document.ontouchstart,n={init:function(o){return o=e.extend({iscroll:{mouseWheel:!0,preventDefault:!1},showOverlay:!0},o),n.settings={state:!1,events:{opened:"drawer.opened",closed:"drawer.closed"},dropdownEvents:{opened:"shown.bs.dropdown",closed:"hidden.bs.dropdown"}},n.settings["class"]=e.extend({nav:"drawer-nav",toggle:"drawer-toggle",overlay:"drawer-overlay",open:"drawer-open",close:"drawer-close",dropdown:"drawer-dropdown"},o["class"]),this.each(function(){var r=this,s=e(this),a=s.data(t);a||(o=e.extend({},o),s.data(t,{options:o}),n.refresh.call(r),o.showOverlay&&n.addOverlay.call(r),e("."+n.settings["class"].toggle).on("click."+t,function(){return n.toggle.call(r),r.iScroll.refresh()}),e(window).resize(function(){return n.close.call(r),r.iScroll.refresh()}),e("."+n.settings["class"].dropdown).on(n.settings.dropdownEvents.opened+" "+n.settings.dropdownEvents.closed,function(){return r.iScroll.refresh()}))})},refresh:function(){this.iScroll=new IScroll("."+n.settings["class"].nav,e(this).data(t).options.iscroll)},addOverlay:function(){var t=e(this),o=e("<div>").addClass(n.settings["class"].overlay+" "+n.settings["class"].toggle);return t.append(o)},toggle:function(){var e=this;return n.settings.state?n.close.call(e):n.open.call(e)},open:function(){var r=e(this);return o&&r.on("touchmove."+t,function(e){e.preventDefault()}),r.removeClass(n.settings["class"].close).addClass(n.settings["class"].open).css({overflow:"hidden"}).drawerCallback(function(){n.settings.state=!0,r.trigger(n.settings.events.opened)})},close:function(){var r=e(this);return o&&r.off("touchmove."+t),r.removeClass(n.settings["class"].open).addClass(n.settings["class"].close).css({overflow:"auto"}).drawerCallback(function(){n.settings.state=!1,r.trigger(n.settings.events.closed)})},destroy:function(){return this.each(function(){var o=e(this);e(window).off("."+t),o.removeData(t)})}};e.fn.drawerCallback=function(t){var o="transitionend webkitTransitionEnd";return this.each(function(){var n=e(this);n.on(o,function(){return n.off(o),t.call(this)})})},e.fn.drawer=function(o){return n[o]?n[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void e.error("Method "+o+" does not exist on jQuery."+t):n.init.apply(this,arguments)}});var map,infowindow,pos;$(document).ready(function(){$(".drawer").drawer()});